<?php namespace JerryLib\Config;

	use JerryLib\System\Common;

	class Config {
		
		private static $_instance; //保存类实例的静态成员变量
		private $get;

        /**
         * 构造函数
         */
		private function __construct() {
			//配置文件地址
			$this->get = Common::getConfig(__DIR__ . '/config.ini');
//			foreach($this->get['path'] as $k => $v) {
//				$this->get['path'][$k] = str_replace('\\', '/', $_SERVER['DOCUMENT_ROOT'] . '/../' . $v);
//			}
		}

        /**
         * 克隆函数，防止克隆
         */
		public function __clone() {
			throw new \Exception('Clone is not allow!');
		}

        /**
         * 外部调用实例化对象
         */
		public static function getInstance() {
			if (!(self::$_instance instanceof self)) {
				self::$_instance = new self;
			}
			return self::$_instance;
		}

		/**
         * 得到配置文件的一个节点数据
         */
		public function section($section) {
			if(isset($this->get[$section])) {
				return $this->get[$section];
			} else {
				throw new \Exception('配置节点"' . $section . '"不存在！');
			}
		}

		/**
         * 得到配置文件的一个值，传入参数是 节点名，字段名
         */
		public function getConfigValue($section, $filed) {
			if(isset($this->get[$section][$filed])) {
				return $this->get[$section][$filed];
			} else {
				throw new \Exception('配置项"' . $section . '"下的"' . $filed . '"不存在！');
			}
		}

	}