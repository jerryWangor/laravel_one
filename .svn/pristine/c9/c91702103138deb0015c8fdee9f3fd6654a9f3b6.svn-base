<?php 
	namespace App\Http\Controllers\Admin;
	use App\Http\Controllers\Controller;
    use Illuminate\Support\Facades\Session;
    use JerryLib\System\Pager;
    use JerryLib\Model\CommonModel;
    use JerryLib\System\Common;
    use Request;

	class CommonController extends Controller {

        protected $action;
        protected $actiondata;
        protected $post;
        /**
         * 公共的构造函数
         */
        public function __construct(Request $request) {
            $this->post = Common::filter_form_data($request::all());
            $url = trim(Request::getRequestUri(), '/');
            if($len = strpos($url, '?')) {
                $this->naction = substr($url, 0, strpos($url, '?'));    
            } else {
                $this->naction = $url;
            }
            list($module, $controller, $action) = explode('/', $this->naction);
            $actiondata = Session::get('_AUTH_MOUDLES');
            $this->actiondata = $actiondata[$module]['controller'][$controller]['action'];
        }

	}
?>